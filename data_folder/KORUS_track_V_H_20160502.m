clear all
close all
daystr='20160502';

horilegs=[datenum('22:30:00') datenum('23:06:03'); ...
datenum('23:47:41') datenum('00:38:03'); ...
datenum('00:46:51') datenum('01:15:49'); ...
datenum('01:22:36') datenum('01:39:19'); ...
datenum('01:43:57') datenum('02:07:26'); ...
datenum('02:12:14') datenum('02:29:37'); ...
datenum('02:31:07') datenum('02:57:48'); ...
datenum('03:39:16') datenum('04:19:15'); ...
datenum('04:28:39') datenum('04:58:14'); ...
datenum('05:04:36') datenum('05:12:11'); ...
datenum('05:15:03') datenum('05:39:04'); ...
datenum('05:49:12') datenum('05:59:02'); ...
datenum('06:31:52') datenum('06:34:37'); ...
]-datenum('00:00:00')+datenum([daystr(1:4) '-' daystr(5:6) '-' daystr(7:8)]);

vertprofs=[datenum('23:06:03') datenum('23:13:17'); ...
datenum('23:15:42') datenum('23:28:27'); ...
datenum('23:28:27') datenum('23:47:41'); ...
datenum('00:38:03') datenum('00:46:51'); ...
datenum('01:15:49') datenum('01:22:36'); ...
datenum('01:39:19') datenum('01:43:57'); ...
datenum('02:07:26') datenum('02:12:14'); ...
datenum('02:29:37') datenum('02:31:07'); ...
datenum('02:57:48') datenum('03:19:21'); ...
datenum('03:19:21') datenum('03:39:16'); ...
datenum('04:19:15') datenum('04:28:39'); ...
datenum('04:58:14') datenum('05:04:36'); ...
datenum('05:12:11') datenum('05:15:03'); ...
datenum('05:39:04') datenum('05:49:12'); ...
datenum('05:59:02') datenum('06:16:55'); ...
datenum('06:16:55') datenum('06:31:52'); ...
datenum('06:34:37') datenum('06:51:40'); ...
]-datenum('00:00:00')+datenum([daystr(1:4) '-' daystr(5:6) '-' daystr(7:8)]);

starmatfile=fullfile(starpaths, [daystr 'star.mat']);
load(starmatfile);

hh = figure('units','inches','position',[.1 .2 4 3],'paperposition',[.1 .1 9 7]);
ok=incl(vis_sun.t,horilegs);

ok_v = incl(vis_sun.t,vertprofs);
h1 = plot(vis_sun.t,vis_sun.Alt, '.k', ...
    vis_sun.t(ok), vis_sun.Alt(ok), '.r',vis_sun.t(ok_v), vis_sun.Alt(ok_v), '.g');
hold on


if exist('vis_zen');
    ok=incl(vis_zen.t,horilegs);
    ok_v=incl(vis_zen.t,vertprofs);
    h2=plot(vis_zen.t,vis_zen.Alt, '*b', ...
        vis_zen.t(ok),vis_zen.Alt(ok), '.r',vis_zen.t(ok_v),vis_zen.Alt(ok_v), '.g');
    hold on
end;
datetick('x','keeplimits');
title(daystr);

image1 = strcat('D:\zq_baeri\KORUS_rgb\plots\',daystr,'.png');
print(hh,'-dpng',image1);



